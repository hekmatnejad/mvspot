#! /bin/sh
# -*- coding: utf-8 -*-
# Copyright (C) 2013 Laboratoire de Recherche et DÃ©veloppement
# de l'Epita (LRDE).
#
# This file is part of Spot, a model checking library.
#
# Spot is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# Spot is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
# License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

. ./defs
set -e

cat >in.tgba <<EOF
acc = "1";
"i", "x", "b",;
"i", "d2", "b",;
"x", "ed", "a", "1";
"ed", "ed", "a & b", "1";
"d2", "d", "a",;
"d", "d", "a", "1";
EOF

run 0 ../ltl2tgba -X -RDCS -b in.tgba > out.tgba

cat >expected.tgba <<EOF
acc = "1";
"1", "2", "b",;
"2", "2", "a", "1";
EOF

diff out.tgba expected.tgba

run 0 ../ltl2tgba  -RDCIS -b XXXXGFa > out.tgba

cat >expected.tgba <<EOF
acc = "a";
"1", "1", "a", "a";
"1", "1", "!a",;
EOF

diff out.tgba expected.tgba

run 0 ../ltl2tgba -RDCIS -kt 'Fp U Gq' > out.tgba
cat >expected.tgba <<EOF
sub trans.: 12
transitions: 6
states: 3
nondeterministic states: 1
EOF

diff out.tgba expected.tgba
